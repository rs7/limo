'use strict';

let assert = require('chai').assert;

import {Feed, User} from '../src/db';

function feed(data) {
    return new Feed(data).validateSync();
}

function user(data) {
    return new User(data).validateSync();
}

describe('Валидация схем', function () {

    describe('Feed', function () {

        it('Валидная схема', function () {
            assert.isUndefined(feed({
                owner: 1052662,
                photo: 324186596,
                user: 53083705,
                period: {
                    from: new Date(2016, 0, 1),
                    to: new Date(2016, 2, 15)
                }
            }));
        });

    });

    describe('User', function () {

        it('Валидная схема', function () {
            assert.isUndefined(user({
                id: 5364435,
                snapshot: {
                    date: new Date(), items: [{
                        photo: 310997686,
                        likes: [21512841, 45833332, 121222239, 170258481, 292666477, 98184161, 45107773, 326723886, 237189688, 220894768, 9929754, 84277806, 52298131, 151824608, 183944043, 57193560, 211671887, 172661240, 253655402, 4151332, 1641404, 37651736, 337740528, 338807608, 72674442, 178173131, 9947943, 52626462, 3432098, 336518268, 306267330, 77872288, 270013013, 232292540, 96218712, 220316338, 176177537, 57569226, 25736083, 289224727, 318512995, 156370205, 28790220, 322833253, 265818672, 5243925, 242186940, 5331559, 200598343, 170350735, 171668415, 8213092, 2245408, 306521137, 302595212, 187009798, 9486712, 102352854, 71413299, 8207579, 177084494, 38574896, 135344811, 302004678, 306990264, 29277828, 44070337, 145895255, 92351405, 144466603, 59277955, 305076674, 16574270, 94270304, 137347955, 31529434, 302227862, 280036370, 88918388, 158219807, 13990071, 232817483, 203401462, 184011564, 256911227, 2692040, 9003522, 147092201, 167358371, 155950209, 18092866, 59314344, 135113816, 67711844, 160387930, 222547721, 10134314, 194169930, 62428948, 71056611]
                    }, {
                        photo: 263395702,
                        likes: [71152886, 93073360, 24980652, 169935711, 35508419, 35029635, 24702862, 64724910, 22274035, 37080541, 46094617, 33832059, 4161428, 19429056, 96049702, 1058763, 56665544, 10650446, 122557532, 71112857, 5336570, 108567507, 6255108, 67711844, 85104012, 33751490, 98936643, 1365397, 130640075, 144652797, 45833332, 170258481, 31958572, 98184161, 4113267, 344858930, 45107773, 263253769, 237189688, 152275672, 4751865, 262767866, 84277806, 3356543, 345164032, 183944043, 72482966, 172661240, 253655402, 67973111, 1641404, 9342347, 37651736, 178173131, 9947943, 3432098, 336518268, 306267330, 334731708, 270013013, 232292540, 220316338, 229021790, 227315997, 282074333, 3115186, 176177537, 181182993, 179119057, 171022167, 318512995, 4448486, 156370205, 28790220, 50162000, 265818672, 116505205, 260898875, 83971786, 248968908, 8213092, 2249115, 55426674, 2245408, 306521137, 312726533, 187009798, 37237780, 9486712, 298020669, 71413299, 15531044, 217381812, 177084494, 38574896, 135344811, 140617515, 19126089, 29277828, 44070337]
                    }, {
                        photo: 189231151,
                        likes: [71152886, 542966, 75703429, 169935711, 66501651, 24702862, 64724910, 22274035, 26085251, 37080541, 124325609, 19429056, 151289366, 51845165, 56665544, 122557532, 9272468, 83022106, 96894474, 124673327, 85104012, 33751490, 36948999, 7614226, 8197754, 1236711, 127808658, 9332285, 113457773, 82578681, 5760496, 5489765, 27676709, 28397136, 32756667, 14759057, 6864947, 29325102, 58696113, 21512841, 45833332, 170258481, 31958572, 98184161, 4113267, 344858930, 45107773, 6667577, 237189688, 152275672, 9929754, 84277806, 151824608, 183944043, 72482966, 63517118, 253655402, 4151332, 67973111, 1641404, 22478544, 37651736, 72674442, 178173131, 9947943, 298349404, 339085222, 3432098, 336518268, 306879341, 306267330, 77872288, 270013013, 232292540, 49829581, 229021790, 176177537, 181182993, 171022167, 236902113, 318512995, 156370205, 28790220, 301018789, 265818672, 74536521, 260898875, 171668415, 2245408, 312726533, 33260242, 9486712, 102352854, 38574896, 15132264, 302004678, 140617515, 306990264, 44070337, 92351405]
                    }]
                }
            }));
        });

        it('Схема без snapshot items', function () {
            assert.isDefined(user({
                id: 5364435,
                snapshot: {
                    date: new Date()
                }
            }));
        });

    });
});
